# 第二章 数据模型与查询语言

*我的语言的界限就是我的世界的界限。*

路德维希·维特根斯坦，逻辑哲学论

数据模型也许是软件开发中最重要的部分了，因为它们有着最深刻的作用：不仅仅是关于软件要怎么写，更是关于我们如何思考我们要解决的问题。

大部分应用程序是通过数据模型层叠构建起来的。对于每一层来说核心问题是：它是如何用下一层术语*表现*的？举个例子：
1. 作为一个应用程序开发者，你看着真实世界（在其中有人、组织、物品、动作、资金流动、传感器等等）然后用对象或者数据结构对它建模，并构建操作这些数据结构的API。这些数据结构通常是特定于你的应用的。
2. 当你要存储这些数据结构，你用一种通用数据结构表达它们，比如JSON文档或者XML文档，关系型数据库中的表，亦或是一个图模型。
3. 构建你使用的数据库软件的工程师先前决定了JSON/XML/关系型/图型数据是如何用内存、硬盘或是网络上的字节流表现方式。
4. 在更低的层，硬件工程师已经想通了如何用电流、光脉冲、磁场来表现字节。

在一个复杂的应用中也许会存在更多的中间层，比如API构建在其它API之上，但是基本的想法仍然是一致的：每一层通过提供一个干净的数据模型隐藏其下层次的复杂性。这样的抽象允许不同的人群——比如，数据库供应商的工程师与使用数据库的应用程序工程师——有效地协作。

市面上有许多种不同的数据模型，且每一种数据模型都包含了如何使用它的假设。有一些用法很简单而有一些是不支持的；有一些操作是很快的而有一些执行起来很差；有一些数据转换很自然而有一些很别扭。

哪怕只是掌握一种数据模型也是会花费很大精力的（想想市面上有多少本关系型数据建模的书就可想而知了）。构建软件已经很困难了，哪怕只是使用一种数据模型并且不计较它的内部实现。但是由于数据模型对构建于其上的软件有着至深的影响，选择一个适合这个应用的就很重要了。

在这一章中我们将研究一系列针对数据存储与查询的通用数据结构（对应先前列表中的第2点）。特别的是我们将比较关系型、文档型以及一小部分基于图的数据结构。我们也将研究众多的查询语言并计较它们的使用场景。在第三章中我们将讨论存储引擎是如何工作的；也就是，这些数据模型实际中是如何实现的（对应先前列表中的第3点）。
